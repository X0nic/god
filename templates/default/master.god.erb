#
# Generated by Chef for <%= node[:hostname] %>
#
God.load "/etc/god/conf.d/*.god"

require 'tlsmail'
Net::SMTP.enable_tls(OpenSSL::SSL::VERIFY_NONE)

God::Contacts::Email.defaults do |d|
  d.from_email = "<%= node['god']['email']['from'] %>"
  d.from_name  = "God"

  d.delivery_method = :<%= node['god']['email']['server']['delivery_method'] %>

  d.server_host     = "<%= node['god']['email']['server']['server_host'] %>"
  d.server_port     = <%= node['god']['email']['server']['server_port'] %>

  <%- if node['god']['email']['server']['server_auth'] != false %>
    <%- if node['god']['email']['server']['server_auth'] != true #server_auth = :login %>
  d.server_auth     = :<%= node['god']['email']['server']['server_auth'] %>
    <%- end %>
  d.server_domain   = "<%= node['god']['email']['server']['server_domain'] %>"
  d.server_user     = "<%= node['god']['email']['server']['server_user'] %>"
  d.server_password = "<%= node['god']['email']['server']['server_password'] %>"
  <%- end %>
end

<% node[:god][:email][:contacts].each do |name,email| %>
God.contact(:email) do |c|
  c.name  = "<%= name %>"
  c.to_email = "<%= email %>"
end

<% end %>
